<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Teste TYR Live Pulse Widget</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            padding: 40px;
            max-width: 800px;
            margin: 0 auto;
        }
        h1 {
            color: #333;
        }
        .info {
            background: #f0f0f0;
            padding: 20px;
            border-radius: 8px;
            margin: 20px 0;
        }
        .code {
            background: #1e1e1e;
            color: #d4d4d4;
            padding: 15px;
            border-radius: 4px;
            overflow-x: auto;
            font-family: 'Courier New', monospace;
            font-size: 12px;
        }
    </style>
</head>
<body>
    <h1>Teste do Widget TYR Live Pulse</h1>
    <p>Esta página testa o widget de rastreamento de visitantes e chat em tempo real.</p>
    
    <div class="info">
        <h3>Instruções:</h3>
        <ol>
            <li>Abra o console do navegador (F12)</li>
            <li>Verifique se há mensagens começando com "[TYR Widget]"</li>
            <li>O botão do widget deve aparecer no canto inferior direito</li>
            <li>Clique no botão para abrir o chat</li>
        </ol>
    </div>

    <div class="info">
        <h3>Configuração Atual:</h3>
        <div class="code" id="config-display"></div>
    </div>

    <!-- TYR Live Pulse Widget -->
    <script>
      (function() {
        console.log('[TYR Widget] Iniciando instalação...');
        const TYR_CONFIG = {
          apiUrl: 'http://localhost:8000',
          tenantId: 1, // ALTERE PARA SEU TENANT_ID
          position: 'bottom-right',
          primaryColor: '#3b82f6',
          buttonText: 'Fale Conosco',
        };
        
        console.log('[TYR Widget] Config:', TYR_CONFIG);
        
        // Definir config antes de carregar o script
        window.TYR_CONFIG = TYR_CONFIG;

        // Mostrar config na página
        document.getElementById('config-display').textContent = JSON.stringify(TYR_CONFIG, null, 2);

        const script = document.createElement('script');
        script.src = TYR_CONFIG.apiUrl + '/api/widgets/tyr-live-pulse.js';
        script.async = true;
        script.onload = function() {
          console.log('[TYR Widget] Script carregado, inicializando...');
          if (window.TYRLivePulse) {
            window.TYRLivePulse.init(TYR_CONFIG);
          } else {
            console.error('[TYR Widget] TYRLivePulse não encontrado após carregar script');
          }
        };
        script.onerror = function() {
          console.error('[TYR Widget] Erro ao carregar script:', script.src);
          alert('Erro ao carregar o widget. Verifique se o servidor está rodando em ' + TYR_CONFIG.apiUrl);
        };
        document.head.appendChild(script);
      })();
    </script>
</body>
</html>

